@model Dziennik_v0._1.Core.Models.DailyMenu

@{
    ViewBag.Title = "Index";
}

<h2>Odżywianie:</h2>
@Html.ActionLink("Profil", "UserProfile", "Diet", new { area = "" }, new { @class = "btn btn-info btn-lg" })
<h2>Twoje posiłki:</h2>
<h4>@Model.DailyMenuDate</h4>
<h3>Sniadanie:</h3>

<table class="table text-center">
    <tr>
        <th class="text-center">
            Edycja:
        </th>

        <th class="text-center">
            Data:
        </th>

        <th class="text-center">
            Czas treningu:
        </th>

        <th class="text-center">
            Rodzaj treningu:
        </th>

        <th class="text-center">
            Szczegóły:
        </th>

        <th class="text-center">
            Usuń:
        </th>
    </tr>

    @foreach (var item in Model.FoodModels)
    {
        {
            if (item.MealType == Dziennik_v0._1.Core.Models.Enums.MealType.breakfast)
            {
                <tr class="cardioRow">
                    <td>
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>

                    <td>
                        @Html.DisplayFor(modelItem => item.Calories)
                    </td>

                    <td>
                        <i class="fas fa-heartbeat"></i>
                    </td>
                    <td>
                    </td>

                    <td>
                    </td>
                </tr>
            }
        }
    }
</table>
@Html.ActionLink("+", "Index", null, null, new { @class = "btn btn-primary" })
<h3>Odiad:</h3>
@Html.ActionLink("+", "Index", null, null, new { @class = "btn btn-primary" })
<h3>Kolacja:</h3>
@Html.ActionLink("+", "Index", null, null, new { @class = "btn btn-primary" })
<h3>Przekąski:</h3>
@Html.ActionLink("+", "Index", null, null, new { @class = "btn btn-primary" })
<div class="d-flex justify-content-center h-100">
    <div class="searchbar">
        <input class="search_input" type="text" name="" placeholder="szukaj...">
        <a href="#" class="search_icon" id="js-search"><i class="fas fa-search"></i></a>
    </div>
</div>

<table class="table hidden">
    <thead>
        <tr scope="col">
            <td>Nazwa</td>
            <td>Kalorie</td>
            <td>Białko</td>
            <td>Tłuszcze</td>
            <td>Weglowodany</td>
            <td>Waga (g.) :</td>
            <td></td>
        </tr>
    </thead>

    <tbody id="tblFood">
    </tbody>
</table>

@section Scripts {
    <script type="text/javascript">
        $("#js-search").click(function () {
            result = $(".search_input").val(),
                $(".table").removeClass("hidden");
            $.ajax({
                url: '../Api/DietApi/GetFoodData/?=' + result,
                type: 'GET',
                dataType: 'json',
                success: function (data) {
                    var tr;
                    for (var i = 0; i < data.length; i++) {
                        tr = tr + "<tr scope='col'>";
                        tr = tr + "<td>" + data[i].Name + "</td>";
                        tr = tr + "<td>" + data[i].Calories + "</td>";
                        tr = tr + "<td>" + data[i].Protein + "</td>";
                        tr = tr + "<td>" + data[i].Fat + "</td>";
                        tr = tr + "<td>" + data[i].Carbohydrates + "</td>";
                        tr = tr + "<td><input class='' type = 'number' name = '' value='100'></td>";
                        tr = tr + "<td><a href='#' class='btn btn-primary'> dodaj </a></td>"
                        tr = tr + "</tr>";
                    }
                    $('#tblFood').html(tr);
                },
                error: function () { alert('coś poszło nie tak, przepraszamy'); },
            });
        });
    </script>
}